name: Build from base

on: [push]

jobs:
  build:
    strategy:
      fail-fast: false
      max-parallel: 1
      matrix:
        os: [ubuntu, fedora, arch]
    runs-on: [self-hosted, "${{ matrix.os }}"]
    timeout-minutes: 360
    steps:
      - uses: actions/checkout@v4
      - run: make build-from-base
        env:
          PACKER_BOOT_WAIT: "1m"
          PACKER_BOOT_KEYGROUP_INTERVAL: "5s"
